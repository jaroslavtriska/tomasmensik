---
import Layout from '../layouts/Layout.astro';
import { client, queries } from '../lib/sanity';
import type { SanityService } from '../lib/sanity';

// Fetch services from Sanity
const services = await client.fetch<SanityService[]>(queries.allServices);

const getIcon = (icon: string) => {
  const icons: Record<string, string> = {
    home: 'M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6',
    key: 'M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z',
    chart: 'M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z',
    chat: 'M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z',
    search: 'M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z',
    document: 'M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z',
  };
  return icons[icon] || icons.home;
};
---

<Layout title="Služby" description="Kompletní realitní služby - prodej, pronájem, odhady a poradenství.">
  <!-- Hero -->
  <section class="py-20 bg-sand-100">
    <div class="container-narrow">
      <div class="max-w-3xl">
        <p class="text-accent-700 font-medium tracking-widest uppercase text-sm mb-4 animate-fade-in">
          Služby
        </p>
        <h1 class="font-heading text-5xl md:text-6xl text-sand-900 mb-6 animate-fade-in animate-delay-100">
          Jak vám mohu pomoci
        </h1>
        <p class="text-sand-600 text-xl animate-fade-in animate-delay-200">
          Nabízím kompletní služby v oblasti nemovitostí. Od prvotní konzultace 
          až po úspěšné dokončení celé transakce.
        </p>
      </div>
    </div>
  </section>

  <!-- Services Grid -->
  <section class="py-24">
    <div class="container-narrow">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        {services.map((service, index) => (
          <div 
            class="p-8 bg-white border border-sand-200 hover:border-accent-300 hover:shadow-lg transition-all duration-300"
            style={`animation-delay: ${index * 100}ms`}
          >
            <div class="w-14 h-14 rounded-full bg-accent-100 flex items-center justify-center mb-6">
              <svg class="w-7 h-7 text-accent-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d={getIcon(service.icon)} />
              </svg>
            </div>
            
            <h2 class="font-heading text-2xl text-sand-900 mb-4">
              {service.title}
            </h2>
            
            <p class="text-sand-600 mb-6">
              {service.description}
            </p>
            
            {service.features && service.features.length > 0 && (
              <ul class="space-y-2">
                {service.features.map((feature: string) => (
                  <li class="flex items-start gap-3 text-sm text-sand-700">
                    <svg class="w-5 h-5 text-accent-600 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                    </svg>
                    <span>{feature}</span>
                  </li>
                ))}
              </ul>
            )}
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Process Section -->
  <section class="py-24 bg-sand-100">
    <div class="container-narrow">
      <div class="text-center mb-16">
        <h2 class="font-heading text-4xl md:text-5xl text-sand-900 mb-4">Jak probíhá spolupráce</h2>
        <p class="text-sand-600 max-w-2xl mx-auto">
          Jednoduchý a transparentní proces od prvního kontaktu až po úspěšné uzavření obchodu.
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        {[
          { step: '01', title: 'Konzultace', desc: 'Nezávazná schůzka k probrání vašich potřeb a možností.' },
          { step: '02', title: 'Příprava', desc: 'Nafocení, ocenění a příprava marketingové strategie.' },
          { step: '03', title: 'Realizace', desc: 'Aktivní prodej, prohlídky a vyjednávání s kupci.' },
          { step: '04', title: 'Dokončení', desc: 'Právní servis, podpis smluv a předání nemovitosti.' },
        ].map((item, index) => (
          <div class="text-center">
            <div class="w-16 h-16 rounded-full bg-accent-700 text-white font-heading text-2xl flex items-center justify-center mx-auto mb-4">
              {item.step}
            </div>
            <h3 class="font-heading text-xl text-sand-900 mb-2">{item.title}</h3>
            <p class="text-sand-600 text-sm">{item.desc}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="py-24 bg-accent-800 text-white">
    <div class="container-narrow text-center">
      <h2 class="font-heading text-4xl md:text-5xl mb-6">
        Máte zájem o některou službu?
      </h2>
      <p class="text-white/80 max-w-2xl mx-auto mb-8 text-lg">
        Kontaktujte mě pro nezávaznou konzultaci. Společně najdeme nejlepší řešení pro vaši situaci.
      </p>
      <a href="/kontakt" class="btn bg-white text-accent-800 hover:bg-sand-100">
        Napište mi
      </a>
    </div>
  </section>
</Layout>
